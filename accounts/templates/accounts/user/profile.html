{% extends "base.html" %}

{% block 'title' %}{{ title }}{% endblock 'title' %}

{% block 'content' %}
    <div class="profile-card text-center">
        <!-- Profile Image -->
        <img src="{{ user.image.url|default:'https://via.placeholder.com/150' }}" 
             alt="{{ user.get_username }}" class="profile-img mb-3">

        <!-- Name & Role -->
        <h3>{{ user.get_full_name|default:user.username }}</h3>
        <p class="text-muted">{{ user.role|default:"No Role Assigned" }}</p>

        <hr>

        <!-- Profile Details -->
        <dl class="row profile-info text-start mt-3">
            <dt class="col-sm-4">Username:</dt>
            <dd class="col-sm-8">{{ user.get_username }}</dd>

            <dt class="col-sm-4">Email:</dt>
            <dd class="col-sm-8">{{ user.email }}</dd>

            <dt class="col-sm-4">Phone:</dt>
            <dd class="col-sm-8">{{ user.phone|default:"-" }}</dd>

            <dt class="col-sm-4">Address:</dt>
            <dd class="col-sm-8">{{ user.address|default:"-" }}</dd>

            <dt class="col-sm-4">Branches:</dt>
            <dd class="col-sm-8">
                {% for branch in user.branches.all %}
                    {{ branch.name }}{% if not forloop.last %}, {% endif %}
                {% empty %}
                    No Branch Assigned
                {% endfor %}
            </dd>

            <dt class="col-sm-4">Active:</dt>
            <dd class="col-sm-8">{{ user.is_active|yesno:"Yes,No" }}</dd>

            <dt class="col-sm-4">Date Joined:</dt>
            <dd class="col-sm-8">{{ user.date_joined|date:"F j, Y, g:i a" }}</dd>
        </dl>

        <!-- Action Buttons -->
        <div class="mt-4">
            <a class="btn btn-primary me-2" href="{% url 'accounts:user-update' user.id %}">Update Profile</a>
            <a class="btn btn-outline-secondary" href="{% url 'password_change' %}">Change Password</a>
        </div>
    </div>
{% endblock 'content' %}